#!/usr/bin/python3

import sys
import subprocess

def factor_number(number):
    try:
        factors = subprocess.check_output(["factor", str(number)], universal_newlines=True)
        factors = factors.strip().split(": ")[1].split()
        factors = [int(factor) for factor in factors]
        return factors
    except subprocess.CalledProcessError:
        return []

def main(file_path):
    try:
        with open(file_path, "r") as file:
            for line in file:
                number = int(line.strip())
                factors = factor_number(number)
                if not factors:
                    print(f"Could not factor {number}")
                else:
                    factors.sort()
                    print(f"{number}={'*'.join(map(str, factors))}")
    except FileNotFoundError:
        print(f"File not found: {file_path}")

if __name__ == "__main__":
    if len(sys.argv) != 2:
        print("Usage: python3 factors.py <file>")
        sys.exit(1)

    file_path = sys.argv[1]
    main(file_path)

